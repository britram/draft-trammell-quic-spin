



QUIC                                                    B. Trammell, Ed.
Internet-Draft                                               P. De Vaere
Intended status: Informational                                ETH Zurich
Expires: May 27, 2018                                            R. Even
                                                                  Huawei
                                                             G. Fioccola
                                                          Telecom Italia
                                                              T. Fossati
                                                                   Nokia
                                                                M. Ihlar
                                                                Ericsson
                                                              E. Stephan
                                                                  Orange
                                                       November 23, 2017


       The Addition of a Spin Bit to the QUIC Transport Protocol
                    draft-trammell-quic-spin-latest

Abstract

   This document summarizes work to date on the addition of a Spin Bit,
   intended for explicit measurability of end-to-end RTT on QUIC flows.
   It proposes a detailed mechanism for the spin bit, describes how to
   use it to measure end-to-end latency, discusses corner cases and
   workarounds therefor in the measurement, and examines the utility and
   privacy implications of the spin bit.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on May 27, 2018.







Trammell, et al.          Expires May 27, 2018                  [Page 1]

Internet-Draft                  Spin Bit                   November 2017


Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  The Spin Bit Mechanism  . . . . . . . . . . . . . . . . . . .   2
   3.  Using the Spin Bit for Passive RTT Measurement  . . . . . . .   2
     3.1.  Limitations and Workarounds . . . . . . . . . . . . . . .   3
     3.2.  Experimental Evaluation . . . . . . . . . . . . . . . . .   3
   4.  Use Cases for Passive RTT Measurement . . . . . . . . . . . .   3
   5.  Privacy and Security Considerations . . . . . . . . . . . . .   3
   6.  Acknowledgments . . . . . . . . . . . . . . . . . . . . . . .   3
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   4

1.  Introduction

   [EDITOR'S NOTE: Brian to write frontmatter.  Why we care, why this
   draft exists.]

2.  The Spin Bit Mechanism

   [EDITOR'S NOTE: Marcus to write.  Modify slightly from PR609 design,
   spin only on short header packets.  Coordinate with work on reserved
   bits in the short header in the transport draft?]

3.  Using the Spin Bit for Passive RTT Measurement

   When a QUIC flow is sending at full rate (i.e., neither application
   nor flow control limited), the latency spin bit in each direction
   changes value once per round-trip time (RTT).  An on-path observer
   can observe the duration between observing the edges in the spin bit
   signal to determine end-to-end RTT.  Note that this measurement, as
   with passive RTT measurement for TCP, includes any transport protocol
   delay (e.g., delayed sending of acknowledgement) and/or application
   layer delay (e.g., waiting for a request to complete).  It therefore



Trammell, et al.          Expires May 27, 2018                  [Page 2]

Internet-Draft                  Spin Bit                   November 2017


   provides devices on path a good instantaneous estimate of the RTT
   experienced by the application.  A simple linear smoothing or moving
   minimum filter can be applied to the stream of RTT information to get
   a more stable estimate.

3.1.  Limitations and Workarounds

   The spin bit provides latency information only when the sender is
   neither application nor flow control limited.  When the sender is
   application-limited by periodic application traffic, where that
   period is longer than the RTT, measuring the spin bit provides
   information about the application period, not the RTT.  Simple
   heuristics based on the observed data rate per flow or changes in the
   RTT series can be used to reject bad RTT samples due to application
   or flow control limitation.  [EDITOR'S NOTE: more here?]

   Since the spin bit logic at each endpoint considers only samples on
   packets that advance the highest packet number seen, signal
   generation itself is resistent to reordering.  However, reordering
   can cause problems at an observer by causing spurious edge detection
   and therefore low RTT estimates.  This can be probabilistically
   mitigated by the observer considering the low-order bits of the
   packet number, and rejecting edges that appear out-of-order.

3.2.  Experimental Evaluation

   [EDITOR'S NOTE: Summary of Piet's work to date goes here.]

4.  Use Cases for Passive RTT Measurement

   [EDITOR'S NOTE: Roni on video]

   [EDITOR'S NOTE: Emile on interdomain]

   [EDITOR'S NOTE: Markus on AQM?]

   [EDITOR'S NOTE: Others?]

5.  Privacy and Security Considerations

   [EDITOR'S NOTE: Brian on trilateration experiments.]

6.  Acknowledgments

   Many thanks to Christian Huitema, who originally proposed the spin
   bit as pull request 609 on draft-ietf-quic-transport.  Thanks to the
   QUIC RTT DT for discussions leading especially to the measurement
   limitations and privacy and security considerations sections.



Trammell, et al.          Expires May 27, 2018                  [Page 3]

Internet-Draft                  Spin Bit                   November 2017


   This work is partially supported by the European Commission under
   Horizon 2020 grant agreement no. 688421 Measurement and Architecture
   for a Middleboxed Internet (MAMI), and by the Swiss State Secretariat
   for Education, Research, and Innovation under contract no. 15.0268.
   This support does not imply endorsement.

Authors' Addresses

   Brian Trammell (editor)
   ETH Zurich
   Gloriastrasse 35
   8092 Zurich
   Switzerland

   Email: ietf@trammell.ch


   Piet De Vaere
   ETH Zurich
   Gloriastrasse 35
   8092 Zurich
   Switzerland

   Email: piet@devae.re


   Roni Even
   Huawei

   Email: roni.even@huawei.com


   Giuseppe Fioccola
   Telecom Italia

   Email: giuseppe.fioccola@telecomitalia.it


   Thomas Fossati
   Nokia

   Email: thomas.fossati@nokia.com


   Markus Ihlar
   Ericsson

   Email: marcus.ihlar@ericsson.com



Trammell, et al.          Expires May 27, 2018                  [Page 4]

Internet-Draft                  Spin Bit                   November 2017


   Emile Stephan
   Orange

   Email: emile.stephan@orange.com















































Trammell, et al.          Expires May 27, 2018                  [Page 5]
